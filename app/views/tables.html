<div class="main">
    <div class="container">
        <div class="row">
            <div class="col-md-3">

                <div ng-repeat="info in list">
                    <h4 ng-show="{{info.description}}">Table description: {{info.description}}</h4>
                    <span ng-class="'{{info.id}}' == activeID ? '' : 'text-muted'">ID: {{info.id}}</span><br>
                    <a class="text-muted" ng-click="showDetails(info.id)">Details</a> |
                    <a class="text-muted" ng-click="showSampleRows(info.id)">Sample rows</a> |
                    <a class="text-muted" ng-click="showSummary(info.id)">Summary</a><br>
                </div>
                <br>
                <div ng-show="activeField" class="widget stacked">
                    <div class="widget-header">
                        <i class="icon-th-list"></i>&nbsp;&nbsp;
                        Quantiles for {{activeField.label}}
                    </div>
                    <!-- /widget-header -->
                    <div class="widget-content">
                        <nvd3-line-chart
                                data="activeField.chartData"
                                id="{{activeField.label}}"
                                height="{{activeField.height}}"
                                margin="{top: 10, right: 10, bottom: 20 , left: 60}"
                                interative="true"
                                tooltips="true"
                                showXAxis="true"
                                xaxistickvalues="[0,1,2,3,4]"
                                showYAxis="true">
                            <svg></svg>
                        </nvd3-multi-bar-chart>
                    </div><!-- /area-chart -->
                </div><!-- /widget-content -->

            </div>
            <div class="col-md-9">
                <div ng-show="showTable == 'list'" class="widget stacked widget-table action-table">
                    <div class="widget-header">
                        <i class="icon-th-list"></i>

                        <h3>Available Tables</h3>
                    </div>
                    <!-- /widget-header -->
                    <div class="widget-content">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th ng-show="{{info.description}}">Description</th>
                                <th>ID</th>
                                <th>Created</th>
                                <th>Updated</th>
                                <th>Rows</th>
                                <th>Cols</th>
                                <th></th><th></th><th></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="info in list">
                                <td ng-show="{{info.description}}">{{info.description}}</td>
                                <td>{{info.id}}</td>
                                <td>{{info.created_at}}</td>
                                <td>{{info.updated_at}}</td>
                                <td>{{info.num_rows}}</td>
                                <td>{{info.num_columns}}</td>
                                <td><a ng-click="showDetails(info.id)">Details</a><br></td>
                                <td><a ng-click="showSampleRows(info.id)">Sample</a><br></td>
                                <td><a ng-click="showSummary(info.id)">Summary</a><br></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- /widget-content -->
                </div>
                <!-- /widget -->
                <div ng-show="showTable == 'details'" class="widget stacked widget-table action-table">
                    <div class="widget-header">
                        <i class="icon-th-list"></i>

                        <h3>Available Table Details - {{info.id}}</h3>
                    </div>
                    <!-- /widget-header -->
                    <div class="widget-content">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>Label</th>
                                <th>Olap Type</th>
                                <th>Simple Type</th>
                                <th>Cardinality</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="fld in info.schema">
                                <td>{{fld.label}}</td>
                                <td>{{fld.olap_type}}</td>
                                <td>{{fld.simpletype}}</td>
                                <td align="right">{{fld.cardinality|number}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- /widget-content -->
                </div>
                <!-- /widget -->
                <div ng-show="showTable == 'sampleRows'" class="widget stacked widget-table action-table">
                    <div class="widget-header">
                        <i class="icon-th-list"></i>
                        <h3>Sample Rows - {{info.id}}</h3>
                    </div>
                    <!-- /widget-header -->
                    <div class="widget-content">
                        <form ng-submit="showSampleRows(info.id,sorted)">
                        <input class="form-control" ng-model='filterQuery'>
                        </form>
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>Label</th>
                                <th ng-repeat="row in show">Rec{{$index+1}}</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="fld in info.schema">
                                <td ng-click="showSampleRows(info.id,fld.label)">
                                    <i class="icon-sort"></i>
                                    {{fld.label}}
                                </td>
                                <td ng-repeat="row in show">{{row[fld.label]}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- /widget-content -->
                </div>
                <!-- /widget -->
                <div ng-show="showTable == 'summary'" class="widget stacked widget-table action-table">
                    <div class="widget-header">
                        <i class="icon-th-list"></i>

                        <h3>Table Summary for Dimensions (Categories) - {{info.id}}</h3>
                    </div>
                    <!-- /widget-header -->
                    <div class="widget-content">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>Label</th>
                                <th>Count</th>
                                <th>Freq</th>
                                <th>Top</th>
                                <th>Unique</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-show="fld.olap_type == 'dimension' && fld.cardinality>0" ng-repeat="fld in info.schema">
                                <td><a ng-click="activateField(fld.label)">{{fld.label}}</a></td>
                                <td>{{summary[fld.label].summary.count}}</td>
                                <td>{{summary[fld.label].summary.freq}}</td>
                                <td>{{summary[fld.label].summary.top}}</td>
                                <td>{{summary[fld.label].summary.unique}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- /widget-content -->
                </div>
                <!-- /widget -->
                <div ng-show="showTable == 'summary'" class="widget stacked widget-table action-table">
                    <div class="widget-header">
                        <i class="icon-th-list"></i>

                        <h3>Table Summary for Measures</h3>
                    </div>
                    <!-- /widget-header -->
                    <div class="widget-content">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>Label</th>
                                <th>Min</th>
                                <th>25%</th>
                                <th>50%</th>
                                <th>75%</th>
                                <th>Max</th>
                                <th>Count</th>
                                <th>Mean</th>
                                <th>Std</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-show="fld.olap_type == 'measure' && fld.cardinality>0" ng-repeat="fld in info.schema">
                                <td><a ng-click="activateField(fld.label)">{{fld.label}}</a></td>
                                <td align="right">{{summary[fld.label].summary.min|number}}</td>
                                <td align="right">{{summary[fld.label].summary["25%"]|number}}</td>
                                <td align="right">{{summary[fld.label].summary["50%"]|number}}</td>
                                <td align="right">{{summary[fld.label].summary["75%"]|number}}</td>
                                <td align="right">{{summary[fld.label].summary.max|number}}</td>
                                <td align="right">{{summary[fld.label].summary.count|number}}</td>
                                <td align="right">{{summary[fld.label].summary.mean|number}}</td>
                                <td align="right">{{summary[fld.label].summary.std|number}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- /widget-content -->
                </div>
                <!-- /widget -->
            </div>
        </div>
    </div>
</div>